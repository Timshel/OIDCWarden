# Changelog

# v2026.2.0-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2026.2.0-1`

# v2026.1.1-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2026.1.1-2`
- Integrate latest change from `Vaultwarden` up to [1.35.3](https://github.com/dani-garcia/vaultwarden/releases/tag/1.35.3)
  \
  This release contains security fixes, update is strongly recommended (Publication in progress [GHSA-h265-g7rm-h337](https://github.com/dani-garcia/vaultwarden/security/advisories/GHSA-h265-g7rm-h337)).

# v2026.1.0-2

- Fix `mysql` migration, `If EXISTS` not supported :(, switch to dropping the table and creating it again.

# v2026.1.0-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2026.1.0-1`
- Remove unused `verifier` column on `sso_auth` table
  :warning: with `sqlite` it will be done by dropping/recreating the table which will invalidate SSO auth in progress.

# v2025.12.2-2

- Integrate latest change from `Vaultwarden` up to [cc80f689](https://github.com/dani-garcia/vaultwarden/commit/cc80f689)

# v2025.12.2-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.12.2-1`

# v2025.12.1-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.12.1-2`

# v2025.12.0-2

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.12.0-2`
  Fix remember device when using 2FA with the override client (This won't work when using multiple account in the same session).

# v2025.12.0-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.12.0-1`

# v2025.11.4-2

- Fix merge error in removed from org mail template

# v2025.11.4-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.11.4-2`

# v2025.10.3-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.10.3-1`
- Integrate latest change from `Vaultwarden` up to [7c7f4f5d](https://github.com/dani-garcia/vaultwarden/commit/7c7f4f5d)
- Add experimental cockroachdb db support (thx @haras-unicorn).

# v2025.10.1-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.10.1-1`
- Integrate latest change from `Vaultwarden` up to [9017ca2](https://github.com/dani-garcia/vaultwarden/commit/9017ca265a28ff1370e6047b8e85c0a6c3327306)
  \
  :warning: Database migration for `postgres` / `mysql` (Due to the unification of the database model).
  This is on the `sso_auth` table used to store authentication in progress (The table will be dropped, authentication in progress will fail).


# v2025.10.0-2

- Fix an overzealous seat limits which caused issues with Android application

# v2025.10.0-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.10.0-1`

# v2025.9.0-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.9.0-2`
- Improve User.save upsert

# v2025.8.1-1

- Integrate latest change from `Vaultwarden` up to [a2ad1dc7](https://github.com/dani-garcia/vaultwarden/commit/a2ad1dc7c3d28834749d4b14206838d795236c27)
- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.8.1-1`
- Fix around singleorg policy

# v2025.8.0-1

- Pass the Bitwarden clients challenge to the provider. If `SSO_PKCE` is disabled validate the challenge before exhchanging the `code`.
- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.8.0-1`

# v2025.7.2-2

- Improve SSO authorization flow
  - Persist returned authorization state (`code` or `error`) to the database instead of wrapping it in a JWT token to pass through Bitwarden clients redirection.
  - Validate Bitwarden clients PKCE code challenge before calling the provider to exchange the code (cannot be passed to the provider due to an underlying library limitation).
  - [Document](https://github.com/Timshel/OIDCWarden/blob/main/SSO.md#on-sso_pkce) that since `SSO_PKCE` is not generated by the client it's more a compatibility setting than a security feature.
- :warning: This include a database migration (replace `sso_nonce` by `sso_auth`).

# v2025.7.2-1

- Integrate latest change from `Vaultwarden`/`SSO PR` up to [a71da2d](https://github.com/dani-garcia/vaultwarden/commit/a71da2d0a4e93034397134b17078a27829264043)
- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.7.2-1`
- Change to `SSO_ORGANIZATIONS_ALL_COLLECTIONS` to stop using a hidden field.
  On user invitation will now add read only access to all available collection (Does not grant access to collections created afterwards.).
- Remove deprecated configurations:
  - `SSO_ORGANIZATIONS_GROUPS_ENABLED` is now considered on by default, check your setup/mappings (`ORG_GROUPS_ENABLED` still need to be activated for sync to occur, will panic if disabled with groups enabled).
  - `SSO_ORGANIZATIONS_INVITE` renamed to `SSO_ORGANIZATIONS_ENABLED` (will panic if present and enabled but `SSO_ORGANIZATIONS_ENABLED` is not enabled).
  - `SSO_ORGANIZATIONS_ID_MAPPING` removed, use the new mapping system (will panic if non empty).

# v2025.6.2-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.6.2-1`

# v2025.6.1-3

- Fix single org policy check regression

# v2025.6.1-2

- Integrate latest change from `Vaultwarden` up to [3b48e6e](https://github.com/dani-garcia/vaultwarden/commit/3b48e6e)
  Should fix inability to delete secrets.

# v2025.6.1-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.6.1-1`
- Provider role and groups are now read from `user_info` endpoint too.
- `SSO_SYNC_ON_REFRESH` allow to trigger role and orgs sync on token refresh.
  This can be expensive since the client can span the endpoint

# v2025.6.0-2

- Update server start message

# v2025.6.0-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.6.0-1`

# v2025.5.1-5

- Check `email_verified` in id_token and user_info

# v2025.5.1-4

- Fix organization group sync when using `Mariadb`

# v2025.5.1-3

- Fix invalid organization sync query with `postgres` and `mysql`

# v2025.5.1-2

- Fix enforcing of organization master password policies.
- Deprecation from `v2025.5.0-1` are still pending (Will wait at least one more week).

# v2025.5.1-1

- Integrate change from `Vaultwarden` [1.34.1](https://github.com/dani-garcia/vaultwarden/tree/1.34.1)
- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.5.1-1`

# v2025.5.0-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.5.0-1`
- :warning: Rework of the organization sync, see [README.md#organization_sync](README.md#organization_sync) :warning:
- Add support for organization groups sync
  - Initially the feature will be available only if `ORG_GROUPS_ENABLED` and `SSO_ORGANIZATIONS_GROUPS_ENABLED` are activated
  - `SSO_ORGANIZATIONS_GROUPS_ENABLED` will be removed in subsequent release (feature will be active if `ORG_GROUPS_ENABLED` is enabled).
- :warning: multiple deprecations
  - `SSO_ORGANIZATIONS_INVITE`: Will be removed with the next release. replaced with `SSO_ORGANIZATIONS_ENABLED`.
  - `SSO_ORGANIZATIONS_ID_MAPPING` Will be removed with the next release. For now if present is still used, only Organization and User role mapping is done.
- :warning: new database modification (add a column with a default value, old version will run on the modified db).

# v2025.4.2-1 (Never released)

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.4.2-1`
- Add support for organization role mapping

# v2025.3.1-1 (Never released)

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.3.1-4`
  \
  :warning: `v2025.3.x` brings change to the login flow, the SSO button is now available on the landing page.
- Integrate latest change from `Vaultwarden` up to [e7c796a6](https://github.com/dani-garcia/vaultwarden/commit/e7c796a6)
- Fix invited user registration without SMTP
- Add sso identifier in admin user panel

# v2025.2.2-2

- Ignore unsupported User role

# v2025.2.2-1

- Integrate latest change from `Vaultwarden` up to [6edceb5](https://github.com/dani-garcia/vaultwarden/commit/6edceb5f7acfee8ffe1ae2f07afd76dc588dda60)
- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.2.2-1`

# v2025.1.2-3

- Fix member invite, `Owner` and `Admin` were not granted collection access.

# v2025.1.2-2

- Fix member edit, `Owner` and `Admin` were losing collection access.

# v2025.1.2-1

- :warning: upgrade to `openidconnect` `4.0.0`, proceed with caution :warning:
- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.1.2-4`

# v2025.1.1-7

- Integrate latest change from `Vaultwarden` up to [8d1df08](https://github.com/dani-garcia/vaultwarden/commit/8d1df08b81e1e0eea28e480de236dc0501674edc)
  \
  :warning: endup not being built due to a merge error.

# v2025.1.1-6

- `SSO_ORGANIZATIONS_ID_MAPPING` organization can now be mapped using `uuid` or `name`.

# v2025.1.1-5

- If `SSO_ORGANIZATIONS_ID_MAPPING` is defined then revocation will apply only to the listed organizations.
  \
  Can be used to restrict on which organizations the revocation logic apply.

# v2025.1.1-4

- Added `SSO_ORGANIZATIONS_REVOCATION` to control membership revocation activation, disabled by default.

# v2025.1.1-3

- Add revocation support
  \
  :warning: if `SSO_ORGANIZATIONS_INVITE` is activated and the provider do not return a matching group for an organization then the user membership will be revoked.
  \
  More details in [README.md#Revocation](https://github.com/Timshel/vaultwarden/blob/main/README.md#revocation)

# v2025.1.1-2

- Integrate change from `Vaultwarden` [1.33.0](https://github.com/dani-garcia/vaultwarden/tree/1.33.0)

# v2025.1.1-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.1.1-1`
- Integrate latest change from `Vaultwarden` up to [c0be36a1](https://github.com/dani-garcia/vaultwarden/commit/c0be36a1)
  \
  :warning: This includes a DB migration; but the added column comes with a default value so a rollback is still possible.:warning:

# v2025.1.0-3

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.1.0-2`

# v2025.1.0-2

- Use css classes to toggle 2FA providers

# v2025.1.0-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2025.1.0-1`
  Add dynamic CSS support
- Integrate latest change from `Vaultwarden` up to [ef2695d](https://github.com/dani-garcia/vaultwarden/commit/ef2695de0cb81feaa5cab8045f0bff71ab3e8c71)
- Allow set-password only if account is uninitialized
- Disable signups if SSO_ONLY is activated

# v2024.12.1-2

- Check stored key before disabling TOTP
- Restore old TOTP disable logic for old clients

# v2024.12.1-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2024.12.1-2`
- Add dynamic CSS support
- Integrate change from `Vaultwarden` [1.32.7](https://github.com/dani-garcia/vaultwarden/tree/1.32.7)

# v2024.10.2-7

- Integrate change from `Vaultwarden` [1.32.6](https://github.com/dani-garcia/vaultwarden/tree/1.32.6)

# v2024.10.2-6

- Prevent disabled User from logging with SSO
- Fix SSO organization Identifier prefill

# v2024.10.2-5

- Base64 encode state before sending it to providers to prevent issues

# v2024.10.2-4

- Fix docker images to use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2024.10.2-1`

# v2024.10.2-3

- Integrate change from `Vaultwarden` [1.32.5](https://github.com/dani-garcia/vaultwarden/tree/1.32.5)

# v2024.10.2-2

- Integrate change from `Vaultwarden` [1.32.4](https://github.com/dani-garcia/vaultwarden/tree/1.32.4)

# v2024.10.2-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version `v2024.10.2-1`
- :warning: Breaking change :warning:
  - `SSO_PKCE` is now on by default, if you are running Zitadel you'll probably need to set it to `false` since it's incompatible with `CLIENT_SECRET`
  - On first SSO login if the provider does not return the email verification status log in will be blocked.
    Check the [documentation](https://github.com/Timshel/vaultwarden/blob/main/SSO.md#on-sso_allow_unknown_email_verification) for more details.
- Integrate latest change from `Vaultwarden` up to [f60502a1](https://github.com/dani-garcia/vaultwarden/commit/f60502a17e578cbfcd98bfd4763dc054948c1662)

# v2024.8.3-3

- Integrate latest change from `Vaultwarden` [1.32.1](https://github.com/dani-garcia/vaultwarden/tree/1.32.1)

# v2024.8.3-2

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version to `v2024.8.3-4`

# v2024.8.3-1

- Use [oidc_web_vault](https://github.com/Timshel/oidc_web_vault) version to `v2024.8.3-1`
